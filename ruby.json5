{
	$schema: "https://docs.renovatebot.com/renovate-schema.json",
	packageRules: [
		{
			matchFileNames: ["**/Gemfile"],
			matchUpdateTypes: ["minor", "patch"],
			groupName: "gems dependencies",
		},

		// Group updates for ruby, ruby container images, ruby-version
		// files, etc. all in one merge request.
		{
			matchPackageNames: ["ruby", "docker.io/ruby"],
			groupName: "Ruby",
		},
	],
	customManagers: [
		{
			customType: "regex",
			fileMatch: ["^*.gemspec"],
			matchStrings: [
				".*add.*dependency '(?<depName>.*?)', '(?<currentValue>.*?)'",
			],
			datasourceTemplate: "rubygems",
		},
		{
			customType: "regex",
			fileMatch: ["^\\.github/workflows/[^/]+\\.ya?ml$"],
			matchStrings: ['ruby-version:\\s+"(?<currentValue>.*?)"'],
			depNameTemplate: "ruby",
			datasourceTemplate: "ruby-version",
		},
	],
}
